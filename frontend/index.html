<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SETWALLET</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="bg"></div>
  <div class="noise"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo">S</div>
      <div>
        <div class="title">SETWALLET</div>
        <div class="subtitle">OnlyChain Wallet ‚Ä¢ <span id="apiStatus">–ø–µ—Ä–µ–≤—ñ—Ä—è—é‚Ä¶</span></div>
      </div>
    </div>

    <button id="btnQuickSettings" class="iconBtn" title="Settings">
      <span class="ico">‚öôÔ∏è</span>
    </button>
  </header>

  <main class="wrap">
    <!-- WELCOME -->
    <section id="viewWelcome" class="card view">
      <div class="hero">
        <div class="heroGlow"></div>
        <h1>–¢–≤—ñ–π –≥–∞–º–∞–Ω–µ—Ü—å —É –±—Ä–∞—É–∑–µ—Ä—ñ</h1>
        <p class="muted">
          –ü—Ä–∏–≤–∞—Ç–Ω—ñ –∫–ª—é—á—ñ <b>–Ω—ñ–∫–æ–ª–∏</b> –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ü—ñ–¥–ø–∏—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π ‚Äî —Ç—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ.
        </p>

        <div class="grid2">
          <button id="btnCreate" class="btn primary">
            <span>–°—Ç–≤–æ—Ä–∏—Ç–∏</span>
            <span class="btnSub">–Ω–æ–≤–∏–π –≥–∞–º–∞–Ω–µ—Ü—å</span>
          </button>
          <button id="btnImport" class="btn">
            <span>–Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏</span>
            <span class="btnSub">–∑ backup / key</span>
          </button>
        </div>

        <div class="tip">
          <div class="pill">–ü–æ—Ä–∞–¥–∞</div>
          <div class="muted">–ü–æ—Å—Ç–∞–≤ –ø–∞—Ä–æ–ª—å ‚Äî —Ç–æ–¥—ñ –∫–ª—é—á –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ (AES-GCM).</div>
        </div>
      </div>
    </section>

    <!-- CREATE -->
    <section id="viewCreate" class="card view hidden">
      <div class="headRow">
        <div>
          <h2>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥–∞–º–∞–Ω—Ü—è</h2>
          <p class="muted">–ó–≥–µ–Ω–µ—Ä—É—î–º–æ ECDSA P-256. –ê–¥—Ä–µ—Å–∞ = SHA-256(public PEM) ‚Üí –ø–µ—Ä—à—ñ 20 –±–∞–π—Ç.</p>
        </div>
        <button class="iconBtn" data-nav="welcome" title="–ù–∞–∑–∞–¥">‚Üê</button>
      </div>

      <div class="field">
        <label>–ü–∞—Ä–æ–ª—å (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)</label>
        <input id="createPass" type="password" placeholder="–ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è local vault" />
        <div class="hint">–ë–µ–∑ –ø–∞—Ä–æ–ª—è private key –±—É–¥–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π –≤—ñ–¥–∫—Ä–∏—Ç–æ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è MVP).</div>
      </div>

      <button id="btnDoCreate" class="btn primary full">
        <span class="spark"></span>
        –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å
      </button>

      <div id="createOut" class="hidden mt16">
        <div class="sep"></div>

        <div class="field">
          <label>Address</label>
          <div class="copyRow">
            <input id="createAddress" readonly />
            <button class="iconBtn" id="btnCopyCreateAddr" title="Copy">‚ßâ</button>
          </div>
        </div>

        <div class="field">
          <label>Public Key (PEM)</label>
          <textarea id="createPub" rows="6" readonly></textarea>
        </div>

        <div class="grid2">
          <button id="btnRegister" class="btn primary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –≤ OnlyChain</button>
          <button id="btnGoWalletFromCreate" class="btn">–í—ñ–¥–∫—Ä–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å</button>
        </div>

        <div id="createMsg" class="toast hidden"></div>
      </div>
    </section>

    <!-- IMPORT -->
    <section id="viewImport" class="card view hidden">
      <div class="headRow">
        <div>
          <h2>–Ü–º–ø–æ—Ä—Ç</h2>
          <p class="muted">–Ü–º–ø–æ—Ä—Ç—É–π –∑ Backup JSON (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ) –∞–±–æ –≤—Å—Ç–∞–≤ Private Key PEM.</p>
        </div>
        <button class="iconBtn" data-nav="welcome" title="–ù–∞–∑–∞–¥">‚Üê</button>
      </div>

      <div class="grid2">
        <button id="btnImportJson" class="btn primary">–Ü–º–ø–æ—Ä—Ç Backup JSON</button>
        <button id="btnLoadLocal" class="btn">–ó–Ω–∞–π—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π</button>
      </div>

      <input id="importFile" type="file" accept="application/json" class="hidden" />

      <div class="sep"></div>

      <div class="field">
        <label>–ü–∞—Ä–æ–ª—å (—è–∫—â–æ backup –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π)</label>
        <input id="importPass" type="password" placeholder="–ø–∞—Ä–æ–ª—å" />
      </div>

      <div class="field">
        <label>Private Key (PEM) ‚Äî –∞–≤–∞—Ä—ñ–π–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç</label>
        <textarea id="importPriv" rows="8" placeholder="-----BEGIN PRIVATE KEY----- ..."></textarea>
        <div class="hint">PEM —ñ–º–ø–æ—Ä—Ç ‚Äî –¥–ª—è MVP. –ù–∞–π–∫—Ä–∞—â–µ ‚Äî Backup JSON –∑—ñ Settings.</div>
      </div>

      <button id="btnDoImport" class="btn primary full">–Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏</button>
      <div id="importMsg" class="toast hidden"></div>
    </section>

    <!-- DASHBOARD -->
    <section id="viewWallet" class="card view hidden">
      <div class="dashTop">
        <div>
          <div class="muted">–ê–¥—Ä–µ—Å–∞</div>
          <div class="addrRow">
            <code id="walletAddr" class="addr">SET‚Ä¶</code>
            <button id="btnCopyAddr" class="iconBtn" title="Copy">‚ßâ</button>
          </div>
        </div>

        <div class="balCard">
          <div class="muted">–ë–∞–ª–∞–Ω—Å</div>
          <div class="balanceLine">
            <div id="balSkeleton" class="skeleton skeletonText"></div>
            <div id="balReal" class="hidden">
              <span id="walletBal" class="balance">0</span>
              <span class="unit">ALTST</span>
            </div>
          </div>
          <button id="btnRefresh" class="btn small ghost">–û–Ω–æ–≤–∏—Ç–∏</button>
        </div>
      </div>

      <div class="grid2 mt12">
        <button class="btn primary" data-nav="send">Send</button>
        <button class="btn" data-nav="receive">Receive</button>
      </div>

      <div class="grid2 mt12">
        <button class="btn ghost" data-nav="history">History</button>
        <button class="btn ghost" data-nav="settings">Settings</button>
      </div>

      <div id="dashMsg" class="toast hidden"></div>
    </section>

    <!-- SEND -->
    <section id="viewSend" class="card view hidden">
      <div class="headRow">
        <div>
          <h2>Send</h2>
          <p class="muted">–ü—ñ–¥–ø–∏—Å –ª–æ–∫–∞–ª—å–Ω–æ. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø—ñ–¥–ø–∏—Å —ñ –ø–∏—à–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é –≤ –ë–î.</p>
        </div>
        <button class="iconBtn" data-nav="wallet" title="–ù–∞–∑–∞–¥">‚Üê</button>
      </div>

      <div class="field">
        <label>To address</label>
        <input id="sendTo" placeholder="SET..." />
      </div>

      <div class="field">
        <label>Amount (ALT)</label>
        <input id="sendAmt" type="number" min="1" step="1" placeholder="100" />
      </div>

      <div class="field">
        <label>Memo (–æ–ø—Ü.)</label>
        <input id="sendMemo" placeholder="coffee" />
      </div>

      <button id="btnDoSend" class="btn primary full">
        <span class="spark"></span>
        –ü—ñ–¥–ø–∏—Å–∞—Ç–∏ —ñ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏
      </button>

      <div id="sendMsg" class="toast hidden"></div>
    </section>

    <!-- RECEIVE -->
    <section id="viewReceive" class="card view hidden">
      <div class="headRow">
        <div>
          <h2>Receive</h2>
          <p class="muted">–ü–æ–∫–∞–∂–∏ QR ‚Äî —ñ–Ω—à—ñ –º–æ–∂—É—Ç—å —à–≤–∏–¥–∫–æ –≤—Å—Ç–∞–≤–∏—Ç–∏ —Ç–≤–æ—é –∞–¥—Ä–µ—Å—É.</p>
        </div>
        <button class="iconBtn" data-nav="wallet" title="–ù–∞–∑–∞–¥">‚Üê</button>
      </div>

      <div class="qrWrap">
        <div class="qrGlow"></div>
        <div id="qr" class="qrBox"></div>
      </div>

      <div class="field">
        <label>QR payload</label>
        <textarea id="qrPayload" rows="3" readonly></textarea>
      </div>

      <div class="grid2">
        <button id="btnRegenQR" class="btn">–û–Ω–æ–≤–∏—Ç–∏ QR</button>
        <button id="btnShareQR" class="btn primary">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å</button>
      </div>

      <div id="recvMsg" class="toast hidden"></div>
    </section>

    <!-- HISTORY -->
    <section id="viewHistory" class="card view hidden">
      <div class="headRow">
        <div>
          <h2>History</h2>
          <p class="muted">–û—Å—Ç–∞–Ω–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (—è–∫ —É Metamask).</p>
        </div>
        <button class="iconBtn" data-nav="wallet" title="–ù–∞–∑–∞–¥">‚Üê</button>
      </div>

      <div id="histSkeleton">
        <div class="histItem skeletonBox"></div>
        <div class="histItem skeletonBox"></div>
        <div class="histItem skeletonBox"></div>
      </div>

      <div id="histList" class="histList hidden"></div>

      <button id="btnReloadHistory" class="btn ghost full mt12">–û–Ω–æ–≤–∏—Ç–∏ History</button>
      <div id="histMsg" class="toast hidden"></div>
    </section>

    <!-- SETTINGS -->
    <section id="viewSettings" class="card view hidden">
      <div class="headRow">
        <div>
          <h2>Settings</h2>
          <p class="muted">Backup / –ë–µ–∑–ø–µ–∫–∞ / –õ–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ.</p>
        </div>
        <button class="iconBtn" data-nav="wallet" title="–ù–∞–∑–∞–¥">‚Üê</button>
      </div>

      <div class="settingBlock">
        <div class="settingTitle">Backup (JSON)</div>
        <div class="muted">–ó–±–µ—Ä–µ–∂–∏ —Ñ–∞–π–ª ‚Äî —Ü–µ —Ç–≤—ñ–π ‚Äúseed‚Äù –¥–ª—è —Ü—å–æ–≥–æ MVP. –¢—Ä–∏–º–∞–π –≤ –±–µ–∑–ø–µ—á–Ω–æ–º—É –º—ñ—Å—Ü—ñ.</div>

        <div class="field mt12">
          <label>–ü–∞—Ä–æ–ª—å –¥–ª—è backup (–æ–ø—Ü.)</label>
          <input id="backupPass" type="password" placeholder="—è–∫—â–æ —Ö–æ—á–µ—à ‚Äî –∑–∞—à–∏—Ñ—Ä—É—î–º–æ backup" />
          <div class="hint">–Ø–∫—â–æ –ø–∞—Ä–æ–ª—å —î ‚Äî private key –±—É–¥–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π AES-GCM (PBKDF2).</div>
        </div>

        <div class="grid2 mt12">
          <button id="btnDownloadBackup" class="btn primary">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ Backup</button>
          <button id="btnShowPublic" class="btn">–ü–æ–∫–∞–∑–∞—Ç–∏ Public Key</button>
        </div>
      </div>

      <div class="settingBlock">
        <div class="settingTitle">API –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è</div>
        <div class="muted">–í–∫–∞–∂–∏ –∞–¥—Ä–µ—Å—É –±–µ–∫–µ–Ω–¥—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, https://setwallet.onrender.com –∞–±–æ http://localhost:8000).</div>

        <div class="field mt12">
          <label>API Base URL</label>
          <input id="apiBaseInput" type="text" placeholder="https://setwallet.onrender.com" />
          <div class="hint">–ü–æ—Ä–æ–∂–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è = –∞–≤—Ç–æ-–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è.</div>
        </div>

        <div class="grid2 mt12">
          <button id="btnSaveApi" class="btn primary">–ó–±–µ—Ä–µ–≥—Ç–∏ API URL</button>
        </div>
      </div>

      <div class="settingBlock">
        <div class="settingTitle">–°–∫–∏–¥–∞–Ω–Ω—è</div>
        <div class="muted">–í–∏–¥–∞–ª—è—î –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –≥–∞–º–∞–Ω—Ü—è –Ω–∞ —Ü—å–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó.</div>
        <button id="btnLogout" class="btn ghost full mt12">–í–∏–π—Ç–∏ (–æ—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ)</button>
      </div>

      <div id="setMsg" class="toast hidden"></div>
    </section>

    <!-- PUBLIC KEY MODAL -->
    <div id="pubModal" class="modal hidden">
      <div class="modalCard">
        <div class="modalHead">
          <div class="modalTitle">Public Key (PEM)</div>
          <button id="btnCloseModal" class="iconBtn">‚úï</button>
        </div>
        <textarea id="walletPub" rows="10" readonly></textarea>
      </div>
    </div>

  </main>

  <!-- Bottom Nav -->
  <nav class="bottomNav">
    <button class="navBtn" data-nav="wallet" aria-label="Wallet">
      <span class="navIco">üíº</span>
      <span class="navTxt">Wallet</span>
    </button>
    <button class="navBtn" data-nav="send" aria-label="Send">
      <span class="navIco">üì§</span>
      <span class="navTxt">Send</span>
    </button>
    <button class="navBtn" data-nav="receive" aria-label="Receive">
      <span class="navIco">üì•</span>
      <span class="navTxt">Receive</span>
    </button>
    <button class="navBtn" data-nav="history" aria-label="History">
      <span class="navIco">üßæ</span>
      <span class="navTxt">History</span>
    </button>
    <button class="navBtn" data-nav="settings" aria-label="Settings">
      <span class="navIco">‚öôÔ∏è</span>
      <span class="navTxt">Settings</span>
    </button>
  </nav>

  <!-- QR library -->
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
  <script src="./app.js"></script>
</body>
</html>
